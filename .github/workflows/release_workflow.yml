name: Release Workflow

on:
  pull_request:
  release:
    types:
      - published

jobs:
  retag:
    name: Update version number
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v1
    - name: testing
      run: |
        echo ${GITHUB_REF}
        echo ${GITHUB_API_URL}
        git status
    - name: Replace version number
      env:
        VERSION: 8.3.4
      run: |
        #Setting version number and turn off DEV flag
        sed --in-place "s/^_gangaVersion = .*/_gangaVersion = '${VERSION}'/g" ganga/GangaCore/__init__.py
        sed --in-place "s/^_development = .*/_development = False/g" ganga/GangaCore/__init__.py
        sed --in-place "s/^_gangaVersion = .*/_gangaVersion = '${VERSION}'/g" ./setup.py

