# testing structure for Athena application
# this test-case is CERN AFS dependent since it use setup files located in /afs/cern.ch/sw/ganga/external/test-externals/1.0/noarch/ATLAS 

from GangaTest.Framework.utils import sleep_until_completed,file_contains,write_file,sleep_until_state
import getpass

joboption = '/tmp/ganga_athenalcg_testing_data-%s/HelloWorldOptions.py' % getpass.getuser()

config['TestingFramework']['timeout']=1200

j = Job()
j.application=Athena()
j.application.option_file=[ joboption ]
j.application.atlas_release='14.2.20'
j.backend=LCG()
assert (j.submit()==True)

assert sleep_until_completed(j,1200)

# removing all jobs
j.remove()
