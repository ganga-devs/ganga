j = Job()
j.splitter = TestSplitter()
j.splitter.backs = [TestSubmitter(),TestSubmitter(),TestSubmitter()]
j.backend= TestSubmitter()
b = j.splitter.backs[1]
b.fail = 'submit'
#b.raw_string_exception = True # test the worst case (deprecated exceptions)!

assert(j.status=='new')
j.submit()
print j
assert(j.status=='submitted')
assert(j.subjobs[0].status=='submitted')
assert(j.subjobs[1].status=='new')

assert(j.subjobs[2].status=='new')

