# testing ROOT 

from GangaTest.Framework.utils import sleep_until_completed,file_contains,write_file,sleep_until_state

myscript = "/afs/cern.ch/sw/ganga/external/test-externals/1.0/noarch/NG/gaus.C"

#config['TestingFramework']['timeout']=1200
#config['TestingFramework']['EnableHTMLReporter']=True

j = Job()
j.name='GANGA_NG_ROOT_TEST'
j.application=Root()
j.application.script=myscript
j.outputdata=ATLASOutputDataset()
j.outputdata.outputdata=['gaus.png']  #NBNB: no test on outputdata! (can add test with assert)
j.backend=NG()

#j.backend.CE='grid.uio.no'
#j.backend.CE='ce01.titan.uio.no'
#j.backend.CE='grad.uppmax.uu.se'

print 'Now ready to submit'
assert(j.submit()==True)

assert sleep_until_completed(j,1200)

j.remove()
